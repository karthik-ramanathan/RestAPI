void 0===Object._clone&&Object.defineProperty(Object.prototype,"_clone",{enumerable:!1,configurable:!1,writable:!1,value:function(e){"use strict";return JSON.parse(JSON.stringify(this))}}),void 0===Object.addItem&&Object.defineProperty(Object.prototype,"addItem",{enumerable:!1,configurable:!1,writable:!1,value:function(e,o){"use strict";for(var t in o?e._clone():e)this[t]=e[t];return this}}),function(e,o){var t="jaffy";"function"==typeof define&&define.amd?define(["exports"],o):"object"==typeof module?module.exports=o():(e[t]=e[t]||{},e[t].RestAPI=o())}(this,function(){"use strict";return function(){var c={url:"",method:"GET",contentType:null,async:!0,headers:{},params:{},body:{},isPayload:!1,isUpload:!1,isFormData:!1,sendCookies:!1,scope:null,successCallback:null,errorCallback:null,xhr:null,logLevel:void 0!==jaffy.logLevel?jaffy.logLevel:4};console.log(c,jaffy.logLevel);var r={debug:function(){console.log(c)},setUrl:function(e){c.url=e},setHeader:function(){var e=Array.from(arguments);e.length&&(e[0]&&"string"==typeof e[0]?c.headers[e[0]]=e[1]:"object"!=typeof e[0]||e[0]instanceof Array||(c.headers.addItem(e[0],!0),e.shift(),this.setHeader.apply(this,e)))},setParam:function(){var e=Array.from(arguments);e.length&&(e[0]&&"string"==typeof e[0]?c.params[e[0]]=e[1]:"object"!=typeof e[0]||e[0]instanceof Array||(c.params.addItem(e[0],!0),e.shift(),this.setParam.apply(this,e)))},setBody:function(){var e=Array.from(arguments);e.length&&(e[0]&&"string"==typeof e[0]?c.body[e[0]]=e[1]:"object"!=typeof e[0]||e[0]instanceof Array||(c.body.addItem(e[0],!0),e.shift(),this.setBody.apply(this,e)))},setPayload:function(e,o){c.contentType="application/json",this.setBody(e,o)},setMethod:function(e){c.method=e.toUpperCase()},setScope:function(e){c.scope=e},sync:function(e){c.async=!1},async:function(e){c.async=e||!0},onError:function(r){r&&"function"==typeof r&&(c.errorCallback=function(e,o,t){r.call({scope:this.scope},e,o,t)})},GET:function(e,o){this.setMethod("GET"),this.execute.call(this,e,o||c.errorCallback||jaffy.errorHook)},POST:function(e,o){this.setMethod("POST"),this.execute.call(this,e,o||c.errorCallback||jaffy.errorHook)},log:function(e,o){e>=c.logLevel&&console.log("%c [Jaffy] %s: %s","background:cyan; color:blue;",c.method,c.url,o)},execute:function(t,a){function f(e,o){if(jaffy.afterHook&&"function"==typeof jaffy.afterHook&&!jaffy.afterHook.call(c,e,o))return r.log(4,"Response cancelled by User"),!1;"function"==typeof t?(r.log(0,e),t(e,o)):r.log(4,e)}if(jaffy.beforeHook&&"function"==typeof jaffy.beforeHook&&!jaffy.beforeHook.call(r,c))return r.log(4,"Request cancelled by User"),!1;for(var e in c.xhr=new XMLHttpRequest,c.params)c.params.hasOwnProperty(e)&&(c.url+=(c.url.split("?")[1]?"&":"?")+e+"="+c.params[e]);for(var o in c.xhr.open(c.method,c.url,!0),c.xhr.onerror=a,c.xhr.onload=function(e,o,t){var r,n,s;200===c.xhr.status?(c.xhr.responseHeaders=(r=c.xhr,n=r.getAllResponseHeaders().trim().split(/[\r\n]+/),s={},n.forEach(function(e){var o=e.split(": "),t=o.shift(),r=o.join(": ");s[t]=r}),s),c.xhr.responseHeaders["content-type"]&&-1<c.xhr.responseHeaders["content-type"].indexOf("application/json")?f(JSON.parse(c.xhr.responseText),c.xhr):f(c.xhr.responseText,c.xhr)):"function"==typeof a?a(c.xhr):console.log("ERROR OCCURED",e,o,t)},c.headers)c.headers.hasOwnProperty(o)&&c.xhr.setRequestHeader(o,c.headers[o]);c.headers,"application/json"===c.contentType?(c.xhr.setRequestHeader("Content-Type",c.contentType),c.xhr.send(JSON.stringify(c.body))):c.xhr.send(c.body)}};return r}});